app:
  description: æµ‹è¯•-ç¾¤å‘agent
  icon: ğŸ¤–
  icon_background: '#FFEAD5'
  mode: workflow
  name: æµ‹è¯•-Email Group Sender Agent
  use_icon_as_answer_icon: false
kind: app
version: 0.1.5
workflow:
  conversation_variables: []
  environment_variables: []
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        image_file_size_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: true
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        sourceType: start
        targetType: document-extractor
      id: 1745743755437-source-1745792283875-target
      source: '1745743755437'
      sourceHandle: source
      target: '1745792283875'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: code
      id: 1745792352378-source-1745797493357-target
      source: '1745792352378'
      sourceHandle: source
      target: '1745797493357'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: true
        iteration_id: '1745795460547'
        sourceType: iteration-start
        targetType: tool
      id: 1745795460547start-source-1746586719772-target
      source: 1745795460547start
      sourceHandle: source
      target: '1746586719772'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: true
        iteration_id: '1746686554628'
        sourceType: iteration-start
        targetType: tool
      id: 1746686554628start-source-1746686564528-target
      source: 1746686554628start
      sourceHandle: source
      target: '1746686564528'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        sourceType: iteration
        targetType: variable-aggregator
      id: 1745795460547-source-1746686972740-target
      source: '1745795460547'
      sourceHandle: source
      target: '1746686972740'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: iteration
        targetType: variable-aggregator
      id: 1746686554628-source-1746686972740-target
      source: '1746686554628'
      sourceHandle: source
      target: '1746686972740'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: true
        iteration_id: '1746686554628'
        sourceType: tool
        targetType: code
      id: 1746686564528-source-1746758574429-target
      source: '1746686564528'
      sourceHandle: source
      target: '1746758574429'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: false
        sourceType: http-request
        targetType: code
      id: 1747004852216-source-1747008777242-target
      source: '1747004852216'
      sourceHandle: source
      target: '1747008777242'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: if-else
      id: 1747008777242-source-1746686703695-target
      source: '1747008777242'
      sourceHandle: source
      target: '1746686703695'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: variable-aggregator
        targetType: end
      id: 1746686972740-source-1746587315681-target
      source: '1746686972740'
      sourceHandle: source
      target: '1746587315681'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: document-extractor
        targetType: http-request
      id: 1745792283875-source-1747004852216-target
      source: '1745792283875'
      sourceHandle: source
      target: '1747004852216'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: iteration
      id: 1746686703695-true-1746686554628-target
      source: '1746686703695'
      sourceHandle: 'true'
      target: '1746686554628'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: if-else
        targetType: iteration
      id: 1746686703695-false-1745795460547-target
      source: '1746686703695'
      sourceHandle: 'false'
      target: '1745795460547'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: true
        iteration_id: '1746686554628'
        sourceType: tool
        targetType: code
      id: 1746686564528-source-1746759185770-target
      source: '1746686564528'
      sourceHandle: source
      target: '1746759185770'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: true
        iteration_id: '1746686554628'
        sourceType: code
        targetType: http-request
      id: 1746758574429-source-1747532748286-target
      source: '1746758574429'
      sourceHandle: source
      target: '1747532748286'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: true
        iteration_id: '1746686554628'
        sourceType: code
        targetType: http-request
      id: 1746759185770-source-1747532748286-target
      source: '1746759185770'
      sourceHandle: source
      target: '1747532748286'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: true
        iteration_id: '1745795460547'
        sourceType: tool
        targetType: code
      id: 1746586719772-source-1747534596297-target
      source: '1746586719772'
      sourceHandle: source
      target: '1747534596297'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: true
        iteration_id: '1745795460547'
        sourceType: tool
        targetType: code
      id: 1746586719772-source-1747534622663-target
      source: '1746586719772'
      sourceHandle: source
      target: '1747534622663'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: true
        iteration_id: '1745795460547'
        sourceType: code
        targetType: http-request
      id: 1747534596297-source-1747534639131-target
      source: '1747534596297'
      sourceHandle: source
      target: '1747534639131'
      targetHandle: target
      type: custom
      zIndex: 1002
    - data:
        isInIteration: true
        iteration_id: '1745795460547'
        sourceType: code
        targetType: http-request
      id: 1747534622663-source-1747534639131-target
      source: '1747534622663'
      sourceHandle: source
      target: '1747534639131'
      targetHandle: target
      type: custom
      zIndex: 1002
    nodes:
    - data:
        desc: ''
        selected: false
        title: å¼€å§‹
        type: start
        variables:
        - allowed_file_extensions: []
          allowed_file_types:
          - document
          allowed_file_upload_methods:
          - local_file
          - remote_url
          label: å¯†é€æ”¶ä»¶äººæ¸…å•
          max_length: 5
          options: []
          required: true
          type: file
          variable: excel_input
        - label: é‚®ä»¶ä¸»é¢˜
          max_length: 10000
          options: []
          required: true
          type: paragraph
          variable: subject
        - label: é‚®ä»¶æ­£æ–‡
          max_length: 10000000
          options: []
          required: true
          type: paragraph
          variable: body
        - label: SMTP æœåŠ¡åœ°å€
          max_length: 256
          options: []
          required: false
          type: text-input
          variable: SMTP_IP
        - label: SMTP æœåŠ¡ç«¯å£
          max_length: 256
          options: []
          required: false
          type: text-input
          variable: SMTP_PORT
        - label: SMTP è´¦æˆ·
          max_length: 256
          options: []
          required: false
          type: text-input
          variable: sender
        - label: SMTP è´¦æˆ·å¯†ç 
          max_length: 256
          options: []
          required: false
          type: text-input
          variable: password
        - label: æ”¶ä»¶äººåœ°å€ï¼ˆé»˜è®¤ä¸å‘ä»¶äººä¸€è‡´ï¼‰
          max_length: 256
          options: []
          required: true
          type: text-input
          variable: recipient
      height: 272
      id: '1745743755437'
      position:
        x: 76.0233560309417
        y: 252.66037378545752
      positionAbsolute:
        x: 76.0233560309417
        y: 252.66037378545752
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        is_array_file: false
        selected: false
        title: æå–å‡ºexcelä¸­çš„å†…å®¹
        type: document-extractor
        variable_selector:
        - '1745743755437'
        - excel_input
      height: 92
      id: '1745792283875'
      position:
        x: 430.20854593801374
        y: 252.66037378545752
      positionAbsolute:
        x: 430.20854593801374
        y: 252.66037378545752
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            response_format: json_object
            temperature: 0.7
          mode: chat
          name: ea01-eus01-gpt-4o-2024-11-20
          provider: azure_openai
        prompt_template:
        - id: 6dfd915a-e5b2-4ec5-8cc3-08bb70ba3d56
          role: system
          text: "ä½ å°†æ¥æ”¶åˆ°ä¸€ä¸ªåŒ…å«â€œå§“å/å…¬å¸åâ€å’Œâ€œé‚®ç®±åœ°å€â€çš„ Markdown è¡¨æ ¼å­—ç¬¦ä¸²ã€‚è¯·ä»ä¸­æå–æ‰€æœ‰é‚®ç®±åœ°å€ï¼Œå¹¶å°†å…¶æ¯50ä¸ªä¸€ç»„ï¼Œåˆ†ç»„è¾“å‡ºä¸º\
            \ JSON æ ¼å¼ï¼Œ\n\nè¾“å‡ºæ ¼å¼ç¤ºä¾‹ï¼š\n{\n  \"groups\": [\n    [\"email1@example.com\"\
            , \"email2@example.com\", ..., \"email50@example.com\"],\n    [\"email51@example.com\"\
            , ..., \"email100@example.com\"],\n    ...\n  ]\n}\n\nè¯·æ³¨æ„ï¼š\n- æ¯ç»„æœ€å¤š50ä¸ªé‚®ç®±\n\
            - ä¸è¦è¾“å‡ºå¤šä½™è§£é‡Šå†…å®¹\n- ä¿ç•™é‚®ç®±çš„åŸå§‹é¡ºåº"
        - id: 25c7bb85-5202-485e-91fa-2a7571718ce1
          role: user
          text: è¾“å…¥ï¼š{{#1745792283875.text#}}
        selected: false
        title: åˆ†ç»„æ¯50ä¸ªä¸€ç»„
        type: llm
        variables: []
        vision:
          enabled: false
      height: 98
      id: '1745792352378'
      position:
        x: 722.968208430857
        y: -484.7009513755716
      positionAbsolute:
        x: 722.968208430857
        y: -484.7009513755716
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        error_handle_mode: terminated
        height: 703
        is_parallel: false
        iterator_selector:
        - '1747008777242'
        - result
        output_selector:
        - '1747534639131'
        - body
        output_type: array[string]
        parallel_nums: 10
        selected: false
        start_node_id: 1745795460547start
        title: è‡ªå®šä¹‰å‘é€
        type: iteration
        width: 1548
      height: 703
      id: '1745795460547'
      position:
        x: 2098.0078744798734
        y: 456.4183955226206
      positionAbsolute:
        x: 2098.0078744798734
        y: 456.4183955226206
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 1548
      zIndex: 1
    - data:
        desc: ''
        isInIteration: true
        selected: false
        title: ''
        type: iteration-start
      draggable: false
      height: 48
      id: 1745795460547start
      parentId: '1745795460547'
      position:
        x: 24
        y: 68
      positionAbsolute:
        x: 2122.0078744798734
        y: 524.4183955226206
      selectable: false
      sourcePosition: right
      targetPosition: left
      type: custom-iteration-start
      width: 44
      zIndex: 1002
    - data:
        code: "def main(arg1: str) -> dict:\n    # è§£æ JSON å­—ç¬¦ä¸²\n    parsed = json.loads(arg1)\n\
          \    groups = parsed[\"groups\"]  # äºŒç»´æ•°ç»„\n\n    # æ¯ç»„é‚®ç®±æ‹¼æ¥æˆç”¨é€—å·è¿æ¥çš„å­—ç¬¦ä¸²\n   \
          \ result = [\", \".join(group) for group in groups]\n\n    return {\n  \
          \      \"result\": result  # Array[String]\n    }\n"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: array[string]
        selected: false
        title: è½¬æ¢ä¸ºjson
        type: code
        variables:
        - value_selector:
          - '1745792352378'
          - text
          variable: arg1
      height: 54
      id: '1745797493357'
      position:
        x: 1065.607427512722
        y: -499.00507360272775
      positionAbsolute:
        x: 1065.607427512722
        y: -499.00507360272775
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        isInIteration: true
        iteration_id: '1745795460547'
        provider_id: kofe
        provider_name: kofe
        provider_type: builtin
        selected: false
        title: ç¾¤å‘é‚®ä»¶å·¥å…·
        tool_configurations: {}
        tool_label: ç¾¤å‘é‚®ä»¶å·¥å…·
        tool_name: email_group_sender
        tool_parameters:
          SMTP_HOST:
            type: mixed
            value: '{{#1745743755437.SMTP_IP#}}'
          SMTP_PORT:
            type: mixed
            value: '{{#1745743755437.SMTP_PORT#}}'
          bcc_list:
            type: mixed
            value: '{{#1745795460547.item#}}'
          cc_list:
            type: mixed
            value: ''
          password:
            type: mixed
            value: '{{#1745743755437.password#}}'
          receiver_email:
            type: mixed
            value: '{{#1745743755437.recipient#}}'
          sender_email:
            type: mixed
            value: '{{#1745743755437.sender#}}'
          subject:
            type: mixed
            value: '{{#1745743755437.subject#}}'
          text:
            type: mixed
            value: '{{#1745743755437.body#}}'
        type: tool
      height: 54
      id: '1746586719772'
      parentId: '1745795460547'
      position:
        x: 168.28580203486354
        y: 65.9420376725127
      positionAbsolute:
        x: 2266.293676514737
        y: 522.3604331951333
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        desc: ''
        outputs:
        - value_selector:
          - '1746686972740'
          - output
          variable: result
        selected: true
        title: ç»“æŸ
        type: end
      height: 90
      id: '1746587315681'
      position:
        x: 4589.416875262278
        y: 318.85770926472037
      positionAbsolute:
        x: 4589.416875262278
        y: 318.85770926472037
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        model:
          completion_params:
            temperature: 0.7
          mode: chat
          name: ea01-eus01-gpt-4o-mini-2024-07-18
          provider: azure_openai
        prompt_template:
        - id: d4babc41-feee-48c6-a6ab-92dec6ec5a87
          role: system
          text: "\nä½ æ˜¯ä¸€ä¸ªæ“…é•¿æ•°æ®åˆ†æå’ŒæŠ¥å‘Šæ’°å†™çš„æ™ºèƒ½åŠ©æ‰‹ã€‚  \nä½ çš„ä»»åŠ¡æ˜¯ï¼š  \næ ¹æ®å¤šç»„é‚®ä»¶å‘é€ç»“æœï¼Œç”Ÿæˆä¸€ä»½ç»“æ„æ¸…æ™°ã€å†…å®¹è¯¦å®çš„ç»Ÿè®¡æŠ¥å‘Šï¼Œæ ¼å¼ä¸º\
            \ Markdownã€‚\n\n**è¾“å…¥ï¼ˆInputï¼‰**  \nå¤šç»„é‚®ä»¶å‘é€ç»“æœï¼Œæ¯ç»„æ•°æ®ä¸ºä¸€ä¸ª JSON å¯¹è±¡ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š\n\n-\
            \ `code`ï¼šå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºå‘é€ç»“æœçŠ¶æ€ç ï¼ˆä¾‹å¦‚ï¼š'1' è¡¨ç¤ºæˆåŠŸï¼Œ'0' è¡¨ç¤ºå¤±è´¥ï¼‰ã€‚\n- `to`ï¼šæ•°ç»„ï¼Œä¸»é€æ”¶ä»¶äººé‚®ç®±åœ°å€åˆ—è¡¨ã€‚\n\
            - `cc`ï¼šæ•°ç»„ï¼ŒæŠ„é€æ”¶ä»¶äººé‚®ç®±åœ°å€åˆ—è¡¨ã€‚\n- `bcc`ï¼šæ•°ç»„ï¼Œå¯†é€æ”¶ä»¶äººé‚®ç®±åœ°å€åˆ—è¡¨ã€‚\n\nç¤ºä¾‹è¾“å…¥ï¼š\n\n```json\n\
            [\n  {\"code\": \"1\", \"to\": [\"agent@iagent.cc\"], \"cc\": [], \"bcc\"\
            : [\"bianpj18@163.com\", \"bianpj2023@163.com\", \"peijiabian@gmail.com\"\
            ]},\n  {\"code\": \"0\", \"to\": [\"user@example.com\"], \"cc\": [\"manager@example.com\"\
            ], \"bcc\": []}\n]\n```\n\n**è¾“å‡ºï¼ˆOutputï¼‰**  \nä¸€ä»½ Markdown æ ¼å¼çš„é‚®ä»¶å‘é€ç»Ÿè®¡æŠ¥å‘Šï¼ŒåŒ…å«ä»¥ä¸‹å†…å®¹ï¼š\n\
            \n1. **æ‘˜è¦ï¼ˆSummaryï¼‰**\n   - æ€»å‘é€å°è¯•æ¬¡æ•°\n   - æˆåŠŸå‘é€æ¬¡æ•°\n   - å¤±è´¥å‘é€æ¬¡æ•°\n   - æˆåŠŸç‡ï¼ˆä»¥ç™¾åˆ†æ¯”è¡¨ç¤ºï¼Œä¿ç•™ä¸¤ä½å°æ•°ï¼‰\n\
            \n2. **è¯¦ç»†ç»Ÿè®¡ï¼ˆDetailed Statisticsï¼‰**\n   - æŒ‰çŠ¶æ€ç åˆ†ç±»çš„å‘é€æ¬¡æ•°ç»Ÿè®¡\n   - æ¯ä¸ªçŠ¶æ€ç å¯¹åº”çš„å‘é€æ¯”ä¾‹ï¼ˆä»¥ç™¾åˆ†æ¯”è¡¨ç¤ºï¼Œä¿ç•™ä¸¤ä½å°æ•°ï¼‰\n\
            \n3. **æ”¶ä»¶äººç»Ÿè®¡ï¼ˆRecipient Statisticsï¼‰**\n   - å”¯ä¸€ä¸»é€ï¼ˆToï¼‰åœ°å€æ•°é‡\n   - å”¯ä¸€æŠ„é€ï¼ˆCCï¼‰åœ°å€æ•°é‡\n\
            \   - å”¯ä¸€å¯†é€ï¼ˆBCCï¼‰åœ°å€æ•°é‡\n   - æ‰€æœ‰å”¯ä¸€æ”¶ä»¶äººåœ°å€æ€»æ•°\n\n4. **å¤±è´¥è¯¦æƒ…ï¼ˆFailure Detailsï¼‰**\n\
            \   - åˆ—å‡ºæ‰€æœ‰å‘é€å¤±è´¥çš„è®°å½•ï¼ŒåŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š\n     - ä¸»é€ï¼ˆToï¼‰åœ°å€åˆ—è¡¨\n     - æŠ„é€ï¼ˆCCï¼‰åœ°å€åˆ—è¡¨\n    \
            \ - å¯†é€ï¼ˆBCCï¼‰åœ°å€åˆ—è¡¨\n     - çŠ¶æ€ç ï¼ˆcodeï¼‰\n\n5. **æ ¼å¼è¦æ±‚ï¼ˆFormatting Requirementsï¼‰**\n\
            \   - ä½¿ç”¨äºŒçº§æ ‡é¢˜ï¼ˆ`##`ï¼‰åˆ’åˆ†å„éƒ¨åˆ†\n   - ä½¿ç”¨è¡¨æ ¼å±•ç¤ºç»Ÿè®¡æ•°æ®ï¼Œè¡¨å¤´ä½¿ç”¨ç²—ä½“\n   - ä½¿ç”¨æ— åºåˆ—è¡¨ï¼ˆ`-`ï¼‰åˆ—å‡ºå¤±è´¥è¯¦æƒ…ä¸­çš„åœ°å€åˆ—è¡¨\n\
            \n**æ³¨æ„äº‹é¡¹ï¼ˆNotesï¼‰**\n- ä¸¥æ ¼æŒ‰ç…§ Markdown è¯­æ³•è¾“å‡ºï¼Œä¸åŒ…å«ä»»ä½•é¢å¤–çš„ HTML æˆ–å…¶ä»–æ ‡è®°ã€‚\n- ä¿è¯ç»Ÿè®¡æ•°æ®çš„å‡†ç¡®æ€§ï¼Œé¿å…é‡å¤è®¡æ•°ã€‚\n\
            - è‹¥è¾“å…¥æ•°æ®ä¸ºç©ºï¼Œè¾“å‡ºæç¤ºâ€œæš‚æ— é‚®ä»¶å‘é€è®°å½•â€ã€‚"
        - id: d7cbf92a-edb9-4913-acae-bc2d98828da6
          role: user
          text: '{{#1746686972740.output#}}'
        selected: false
        title: LLM 2
        type: llm
        variables: []
        vision:
          enabled: false
      height: 98
      id: '1746610301806'
      position:
        x: 3246.677893776952
        y: -758.7379789908948
      positionAbsolute:
        x: 3246.677893776952
        y: -758.7379789908948
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        error_handle_mode: terminated
        height: 532
        is_parallel: false
        iterator_selector:
        - '1747008777242'
        - result
        output_selector:
        - '1747532748286'
        - body
        output_type: array[string]
        parallel_nums: 10
        selected: false
        start_node_id: 1746686554628start
        title: é»˜è®¤å‘é€
        type: iteration
        width: 1623
      height: 532
      id: '1746686554628'
      position:
        x: 2098.0078744798734
        y: -284.2940544711326
      positionAbsolute:
        x: 2098.0078744798734
        y: -284.2940544711326
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 1623
      zIndex: 1
    - data:
        desc: ''
        isInIteration: true
        selected: false
        title: ''
        type: iteration-start
      draggable: false
      height: 48
      id: 1746686554628start
      parentId: '1746686554628'
      position:
        x: 24
        y: 68
      positionAbsolute:
        x: 2122.0078744798734
        y: -216.2940544711326
      selectable: false
      sourcePosition: right
      targetPosition: left
      type: custom-iteration-start
      width: 44
      zIndex: 1002
    - data:
        desc: ''
        isInIteration: true
        iteration_id: '1746686554628'
        provider_id: kofe
        provider_name: kofe
        provider_type: builtin
        selected: false
        title: ç¾¤å‘é‚®ä»¶å·¥å…·
        tool_configurations: {}
        tool_label: ç¾¤å‘é‚®ä»¶å·¥å…·
        tool_name: email_group_sender
        tool_parameters:
          SMTP_HOST:
            type: mixed
            value: 101.89.86.84
          SMTP_PORT:
            type: mixed
            value: '465'
          bcc_list:
            type: mixed
            value: '{{#1746686554628.item#}}'
          cc_list:
            type: mixed
            value: ''
          password:
            type: mixed
            value: uB?Zw6ZbW3
          receiver_email:
            type: mixed
            value: '{{#1745743755437.recipient#}}'
          sender_email:
            type: mixed
            value: agent@iagent.cc
          subject:
            type: mixed
            value: '{{#1745743755437.subject#}}'
          text:
            type: mixed
            value: '{{#1745743755437.body#}}'
        type: tool
      height: 54
      id: '1746686564528'
      parentId: '1746686554628'
      position:
        x: 139.67527378687782
        y: 73.72164889086253
      positionAbsolute:
        x: 2237.6831482667512
        y: -210.57240558027007
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        cases:
        - case_id: 'true'
          conditions:
          - comparison_operator: empty
            id: f2aa3002-54b9-4757-af5c-c3554935e3bb
            value: ''
            varType: string
            variable_selector:
            - '1745743755437'
            - SMTP_IP
          - comparison_operator: empty
            id: a9bb2f25-1efe-423e-a995-5d64718f2931
            value: ''
            varType: string
            variable_selector:
            - '1745743755437'
            - SMTP_PORT
          - comparison_operator: empty
            id: 188c4818-8a1f-4801-a336-6c49da590636
            value: ''
            varType: string
            variable_selector:
            - '1745743755437'
            - sender
          - comparison_operator: empty
            id: 6ed877b3-5905-4360-a6cd-d1575deeea11
            value: ''
            varType: string
            variable_selector:
            - '1745743755437'
            - password
          id: 'true'
          logical_operator: and
        desc: ''
        selected: false
        title: åˆ¤æ–­smtpæ˜¯å¦ä½¿ç”¨é»˜è®¤
        type: if-else
      height: 204
      id: '1746686703695'
      position:
        x: 1447.5936879898522
        y: 252.66037378545752
      positionAbsolute:
        x: 1447.5936879898522
        y: 252.66037378545752
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        desc: ''
        output_type: array[string]
        selected: false
        title: å˜é‡èšåˆå™¨
        type: variable-aggregator
        variables:
        - - '1745795460547'
          - output
        - - '1746686554628'
          - output
      height: 131
      id: '1746686972740'
      position:
        x: 4199.3467688477795
        y: 318.85770926472037
      positionAbsolute:
        x: 4199.3467688477795
        y: 318.85770926472037
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data:
          - id: key-value-41
            key: ''
            type: text
            value: "{\n  \"message_id\": \"{{#1746758574429.result#}}\"\n}"
          type: json
        desc: ''
        headers: Content-Type:application/json
        isInIteration: true
        iteration_id: '1746686554628'
        method: post
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: HTTP è¯·æ±‚
        type: http-request
        url: https://www.iagent.cc/email-status
        variables: []
      height: 135
      id: '1746758454413'
      parentId: '1746686554628'
      position:
        x: 741.7621573792385
        y: 365.4235190138761
      positionAbsolute:
        x: 2839.770031859112
        y: 81.1294645427435
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        code: "import json\n\ndef main(arg1: str) -> dict:\n    # ç›´æ¥è§£æä¼ å…¥çš„ JSON å­—ç¬¦ä¸²\n\
          \    data = json.loads(arg1)\n\n    # æå–å¹¶æ¸…æ´— message_id\n    raw_message_id\
          \ = data.get(\"message_id\", \"\")\n    clean_message_id = raw_message_id.strip(\"\
          <>\")\n\n    return {\n        \"result\": clean_message_id\n    }\n"
        code_language: python3
        desc: ''
        isInIteration: true
        iteration_id: '1746686554628'
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: æå–message_id
        type: code
        variables:
        - value_selector:
          - '1746686564528'
          - text
          variable: arg1
      height: 54
      id: '1746758574429'
      parentId: '1746686554628'
      position:
        x: 460.96371849428033
        y: 85.82092612560865
      positionAbsolute:
        x: 2558.9715929741537
        y: -198.47312834552395
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        code: "import json\nimport time\nimport requests\n\ndef main(message_id: str,\
          \ expected_total: int) -> dict:\n    url = \"https://www.iagent.cc/email-status\"\
          \n    headers = {\"Content-Type\": \"application/json\"}\n    payload =\
          \ {\"message_id\": message_id}\n    \n    max_retries = 10\n    retry_delay\
          \ = 180  # 3åˆ†é’Ÿ\n\n    last_result = {}\n\n    for attempt in range(max_retries):\n\
          \        response = requests.post(url, headers=headers, json=payload)\n\n\
          \        if response.status_code == 200:\n            try:\n           \
          \     result = response.json()\n                last_result = result  #\
          \ ä¿å­˜æœ€æ–°ç»“æœ\n\n                current_total = int(result.get(\"total_sent\"\
          , 0))  # æ ¹æ®è¿”å›ç»“æ„è°ƒæ•´ key\n\n                if current_total == expected_total:\n\
          \                    return {\n                        \"status\": \"completed\"\
          ,\n                        \"sent\": current_total,\n                  \
          \      \"response\": result\n                    }\n            except Exception\
          \ as e:\n                return {\"error\": f\"è§£æå“åº”å¤±è´¥: {str(e)}\"}\n   \
          \     \n        time.sleep(retry_delay)\n\n    return {\n        \"status\"\
          : \"timeout\",\n        \"message\": f\"è¶…è¿‡æœ€å¤§å°è¯•æ¬¡æ•°ï¼Œå®é™…å‘é€æ•°æœªè¾¾åˆ° {expected_total}\"\
          ,\n        \"last_response\": last_result\n    }\n\n"
        code_language: python3
        desc: ''
        isInIteration: true
        iteration_id: '1746686554628'
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: æœåŠ¡å™¨è·å–result
        type: code
        variables:
        - value_selector:
          - '1746758574429'
          - result
          variable: message_id
        - value_selector:
          - '1746759185770'
          - result
          variable: expected_total
      height: 54
      id: '1746759105853'
      parentId: '1746686554628'
      position:
        x: 1011.2593982209892
        y: 458
      positionAbsolute:
        x: 3109.2672727008626
        y: 173.7059455288674
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        code: "def main(arg1: str) -> dict:\n    # æ‹†åˆ†å­—ç¬¦ä¸²å¹¶ç§»é™¤ç©ºæ ¼\n    items = [item.strip()\
          \ for item in arg1.split(\",\") if item.strip()]\n    \n    return {\n \
          \       \"result\": len(items)\n    }"
        code_language: python3
        desc: ''
        isInIteration: true
        iteration_id: '1746686554628'
        outputs:
          result:
            children: null
            type: number
        selected: false
        title: æå–itemä¸ªæ•°
        type: code
        variables:
        - value_selector:
          - '1746686554628'
          - item
          variable: arg1
      height: 54
      id: '1746759185770'
      parentId: '1746686554628'
      position:
        x: 467.69825439802753
        y: 211.72382234405507
      positionAbsolute:
        x: 2565.706128877901
        y: -72.57023212707753
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        code: "\ndef main(arg1: str, arg2: int) -> dict:\n    return {\n        \"\
          result\": arg1 + arg2,\n    }\n"
        code_language: python3
        desc: ''
        isInIteration: true
        iteration_id: '1746686554628'
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: ä»£ç æ‰§è¡Œ 5
        type: code
        variables:
        - value_selector: []
          variable: arg1
        - value_selector:
          - '1746759185770'
          - result
          variable: arg2
      height: 54
      id: '1747003435139'
      parentId: '1746686554628'
      position:
        x: 1179.20886915842
        y: 308.17007786165516
      positionAbsolute:
        x: 3277.2167436382933
        y: 23.876023390522562
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data:
          - id: key-value-2
            key: ''
            type: text
            value: "{\n  \"text\": \"{{{{#1745792283875.text#}}}}\"\n}"
          type: json
        desc: ''
        headers: Content-Type:application/json
        method: post
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: å¤„ç†excel
        type: http-request
        url: https://dc37-202-36-244-18.ngrok-free.app/extract-emails
        variables: []
      height: 151
      id: '1747004852216'
      position:
        x: 760.958208107277
        y: 252.66037378545752
      positionAbsolute:
        x: 760.958208107277
        y: 252.66037378545752
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\n\ndef main(arg1: str) -> dict:\n    json_ready = json.dumps({\"\
          text\": arg1}, ensure_ascii=False)\n    return {\n        \"result\": json_ready\n\
          \    }"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: ä»£ç æ‰§è¡Œ 6
        type: code
        variables:
        - value_selector:
          - '1745792283875'
          - text
          variable: arg1
      height: 54
      id: '1747005672293'
      position:
        x: 706.5421826602038
        y: -98.44563385539549
      positionAbsolute:
        x: 706.5421826602038
        y: -98.44563385539549
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        code: "import json\n\ndef main(arg1: str) -> dict:\n    array = json.loads(arg1)\
          \  # å°†å­—ç¬¦ä¸²å½¢å¼çš„ JSON åˆ—è¡¨è½¬ä¸º Python åˆ—è¡¨\n    return {\"result\": array}\n"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: array[string]
        selected: false
        title: è½¬æ¢ä¸ºjson-array
        type: code
        variables:
        - value_selector:
          - '1747004852216'
          - body
          variable: arg1
      height: 54
      id: '1747008777242'
      position:
        x: 1114.5311661686342
        y: 252.66037378545752
      positionAbsolute:
        x: 1114.5311661686342
        y: 252.66037378545752
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data: []
          type: none
        desc: ''
        headers: ''
        method: get
        params: ''
        retry_config:
          max_retries: 10
          retry_enabled: true
          retry_interval: 5000
        selected: false
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: HTTP è¯·æ±‚ 3
        type: http-request
        url: ''
        variables: []
      height: 79
      id: '1747036177274'
      position:
        x: 2219.459035207413
        y: -657.555223458018
      positionAbsolute:
        x: 2219.459035207413
        y: -657.555223458018
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data:
          - id: key-value-1
            key: ''
            type: text
            value: "{\n  \"user_id\": \"{{#sys.user_id#}}\",\n  \"messages\": [\n\
              \    {\n      \"message_id\": \"{{#1746758574429.result#}}\",\n    \
              \  \"item\": {{#1746759185770.result#}}\n    }\n  ]\n}"
          type: json
        desc: ''
        headers: Content-Type:application/json
        isInIteration: true
        iteration_id: '1746686554628'
        method: post
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: HTTP è¯·æ±‚ 4
        type: http-request
        url: https://dc37-202-36-244-18.ngrok-free.app/task/create
        variables: []
      height: 151
      id: '1747532748286'
      parentId: '1746686554628'
      position:
        x: 846.2547666762662
        y: 65
      positionAbsolute:
        x: 2944.2626411561396
        y: -219.2940544711326
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        code: "import json\n\ndef main(arg1: str) -> dict:\n    # ç›´æ¥è§£æä¼ å…¥çš„ JSON å­—ç¬¦ä¸²\n\
          \    data = json.loads(arg1)\n\n    # æå–å¹¶æ¸…æ´— message_id\n    raw_message_id\
          \ = data.get(\"message_id\", \"\")\n    clean_message_id = raw_message_id.strip(\"\
          <>\")\n\n    return {\n        \"result\": clean_message_id\n    }"
        code_language: python3
        desc: ''
        isInIteration: true
        iteration_id: '1745795460547'
        outputs:
          result:
            children: null
            type: string
        selected: false
        title: ä»£ç æ‰§è¡Œ 8
        type: code
        variables:
        - value_selector:
          - '1746586719772'
          - text
          variable: arg1
      height: 54
      id: '1747534596297'
      parentId: '1745795460547'
      position:
        x: 472.28580203486354
        y: 65.9420376725127
      positionAbsolute:
        x: 2570.293676514737
        y: 522.3604331951333
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        code: "def main(arg1: str) -> dict:\n    # æ‹†åˆ†å­—ç¬¦ä¸²å¹¶ç§»é™¤ç©ºæ ¼\n    items = [item.strip()\
          \ for item in arg1.split(\",\") if item.strip()]\n    \n    return {\n \
          \       \"result\": len(items)\n    }"
        code_language: python3
        desc: ''
        isInIteration: true
        iteration_id: '1745795460547'
        outputs:
          result:
            children: null
            type: number
        selected: false
        title: ä»£ç æ‰§è¡Œ 9
        type: code
        variables:
        - value_selector:
          - '1745795460547'
          - item
          variable: arg1
      height: 54
      id: '1747534622663'
      parentId: '1745795460547'
      position:
        x: 472.28580203486354
        y: 158.9420376725127
      positionAbsolute:
        x: 2570.293676514737
        y: 615.3604331951333
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    - data:
        authorization:
          config: null
          type: no-auth
        body:
          data:
          - id: key-value-2
            key: ''
            type: text
            value: "{\n  \"user_id\": \"{{#sys.user_id#}}\",\n  \"messages\": [\n\
              \    {\n      \"message_id\": \"{{#1747534596297.result#}}\",\n    \
              \  \"item\": {{#1747534622663.result#}}\n    }\n  ]\n}"
          type: json
        desc: ''
        headers: Content-Type:application/json
        isInIteration: true
        iteration_id: '1745795460547'
        method: post
        params: ''
        retry_config:
          max_retries: 3
          retry_enabled: true
          retry_interval: 100
        selected: false
        timeout:
          max_connect_timeout: 0
          max_read_timeout: 0
          max_write_timeout: 0
        title: HTTP è¯·æ±‚ 5
        type: http-request
        url: https://dc37-202-36-244-18.ngrok-free.app/task/create
        variables: []
      height: 151
      id: '1747534639131'
      parentId: '1745795460547'
      position:
        x: 833.819517131325
        y: 65.9420376725127
      positionAbsolute:
        x: 2931.8273916111984
        y: 522.3604331951333
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 244
      zIndex: 1002
    viewport:
      x: -577.0140387690146
      y: 219.1634650954814
      zoom: 0.312860032935837
